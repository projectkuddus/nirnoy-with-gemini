<!DOCTYPE html>
<html>
<head>
  <title>Clear Nirnoy Session</title>
  <style>
    body { font-family: Arial; padding: 40px; text-align: center; background: #f0f5ff; }
    h1 { color: #2563eb; }
    button { padding: 15px 30px; font-size: 18px; cursor: pointer; background: #2563eb; color: white; border: none; border-radius: 8px; margin: 10px; }
    button:hover { background: #1d4ed8; }
    .result { margin-top: 20px; padding: 20px; background: white; border-radius: 8px; }
    a { color: #2563eb; text-decoration: none; font-size: 18px; }
  </style>
</head>
<body>
  <h1>ðŸ”§ Nirnoy Session Manager</h1>
  
  <button onclick="clearSession()">Clear Session & Start Fresh</button>
  <button onclick="viewSession()">View Current Session</button>
  
  <div class="result" id="result"></div>
  
  <p style="margin-top: 30px;">
    <a href="/patient-auth">â†’ Go to Login Page</a>
  </p>
  
  <script>
    function clearSession() {
      localStorage.removeItem('nirnoy_session');
      document.getElementById('result').innerHTML = '<h2 style="color:green">âœ“ Session Cleared!</h2><p>You can now register a fresh account.</p><p><a href="/patient-auth">Click here to login â†’</a></p>';
    }
    
    function viewSession() {
      const data = localStorage.getItem('nirnoy_session');
      if (data) {
        try {
          const parsed = JSON.parse(data);
          document.getElementById('result').innerHTML = '<h2>Current Session:</h2><pre style="text-align:left;overflow:auto;">' + JSON.stringify(parsed, null, 2) + '</pre>';
        } catch (e) {
          document.getElementById('result').innerHTML = '<h2 style="color:red">Invalid session data</h2><pre>' + data + '</pre>';
        }
      } else {
        document.getElementById('result').innerHTML = '<h2>No session found</h2><p>You are not logged in.</p>';
      }
    }
    
    // Show current state on load
    viewSession();
  </script>
</body>
</html>
